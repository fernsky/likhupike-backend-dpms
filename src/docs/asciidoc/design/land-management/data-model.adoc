=== Data Model

_Document the entity relationships for the land management system here._

==== Entity Relationship Diagram

[plantuml]
----
@startuml
entity LandParcel {
  * id : UUID
  * parcelNumber : String
  * previousParcelNumber : String
  * area : Double
  * areaInTraditionalUnit : String
  * unitOfMeasurement : String
  * wardNumber : Integer
  * municipality : String
  * district : String
  * geometry : Geometry
  * landUseTypeId : UUID
  * ownershipTypeId : UUID
  * registrationNumber : String
  * registrationDate : Date
}

entity LandUseType {
  * id : UUID
  * name : String
  * description : String
}

entity LandOwnershipType {
  * id : UUID
  * name : String
  * code : String
  * description : String
}

entity LandOwner {
  * id : UUID
  * name : String
  * citizenshipNumber : String
  * citizenshipIssuedDate : Date
  * citizenshipIssuedOffice : String
  * permanentAddress : String
  * temporaryAddress : String
  * phoneNumber : String
  * email : String
  * fatherName : String
  * grandfatherName : String
  * spouseName : String
  * photo : Blob
  * isGovernmentEntity : Boolean
  * isGuthi : Boolean
}

entity LandOwnershipCertificate {
  * id : UUID
  * certificateNumber : String
  * issuedDate : Date
  * issuedBy : String
  * certificateImage : Blob
  * isActive : Boolean
}

entity LandParcelOwnership {
  * id : UUID
  * landParcelId : UUID
  * landOwnerId : UUID
  * ownershipShare : Double
  * startDate : Date
  * endDate : Date
  * certificateId : UUID
  * remarks : String
}

entity GuthiDetails {
  * id : UUID
  * guthiType : String
  * guthiName : String
  * establishedDate : Date
  * purpose : String
  * responsibleEntity : String
  * landOwnerId : UUID
}

entity GovernmentLandDetails {
  * id : UUID
  * governmentDepartment : String
  * managingAuthority : String
  * purposeOfUse : String
  * allocationOrder : String
  * allocationDate : Date
  * landOwnerId : UUID
}

entity Building {
  * id : UUID
  * buildingNumber : String
  * constructionYear : Integer
  * floorCount : Integer
  * totalArea : Double
  * usageTypeId : UUID
  * landParcelId : UUID
  * coordinates : Geometry
}

entity BuildingUsageType {
  * id : UUID
  * name : String
  * description : String
}

LandParcel }o--|| LandUseType
LandParcel }o--|| LandOwnershipType
LandParcel ||--o{ Building
Building }o--|| BuildingUsageType

LandParcel ||--o{ LandParcelOwnership
LandOwner ||--o{ LandParcelOwnership
LandOwnershipCertificate ||--o{ LandParcelOwnership

LandOwner |o--o| GuthiDetails
LandOwner |o--o| GovernmentLandDetails

@enduml
----

==== Key Entities

===== Core Entities
* **LandParcel**: The fundamental unit of land with details including parcel number, previous parcel number, area, location, and classification
* **LandOwner**: Individual or entity that owns land parcels, including personal details and documentation
* **LandOwnershipCertificate**: Represents the physical/digital certificate (Lalpurja) issued as proof of ownership
* **LandParcelOwnership**: Associative entity that captures the relationship between land parcels and owners, including ownership share

===== Land Ownership Types
As per Land Revenue Act, 1978, the system supports various land registration categories:

* Government Land: Registered in the name of Government of Nepal
* Public Land: Registered in the name of Government of Nepal with specified usage
* Raikar Land: Registered in the name of the private owner
* Various Guthi Land types:
** Guthi Land: Registered in the name of concerned Guthi
** Guthi Raithani Nambari: Registered in the name of owner, who pays revenue to Guthi
** Guthi Nambari: Registered in name of Guthi, which pays revenue to government
** Guthi Tainathi: Unregistered land with Guthi having exclusive rights
** Guthi Adhinastha: Land where holder pays revenue in kind to Guthi
* Birta Land: Registered in the name of tenant
* Haal Abadi Land: Registered in the name of tiller

===== Specialized Ownership Entities
* **GuthiDetails**: Additional information for land owned by religious or charitable trusts (Guthi)
* **GovernmentLandDetails**: Additional details for government-owned land parcels

===== Built Environment
* **Building**: Structures built on land parcels
* **BuildingUsageType**: Classification of building usage (residential, commercial, etc.)
