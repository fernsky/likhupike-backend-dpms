== Core Schema: User Management

=== Users Table
The users table is the cornerstone of the DPIS, managing user authentication and authorization.

.Table: users
[cols="2,2,1,4",options="header"]
|===
|Column Name |Data Type |Nullable |Description
|id |UUID |No |Primary key for user identification
|email |VARCHAR(255) |No |Unique email address for authentication
|password |VARCHAR(255) |No |Encrypted password hash
|is_ward_level_user |BOOLEAN |No |Flag indicating ward-level access restrictions
|ward_number |INTEGER |Yes |Associated ward number for ward-level users
|is_approved |BOOLEAN |No |Account approval status
|approved_by |UUID |Yes |Reference to approving administrator
|approved_at |TIMESTAMP |Yes |Timestamp of approval
|is_deleted |BOOLEAN |No |Soft deletion flag
|deleted_at |TIMESTAMP |Yes |Soft deletion timestamp
|deleted_by |UUID |Yes |Reference to deleting administrator
|created_at |TIMESTAMP WITH TIME ZONE |No |Record creation timestamp
|created_by |UUID |Yes |Reference to creating user
|updated_at |TIMESTAMP WITH TIME ZONE |No |Last update timestamp
|updated_by |UUID |Yes |Reference to last updating user
|version |BIGINT |Yes |Optimistic locking version number
|===

.Indexes
[cols="2,2,1",options="header"]
|===
|Name |Columns |Type
|users_pkey |id |Primary Key
|idx_users_email |email |Unique
|===

.Constraints
[cols="3,3",options="header"]
|===
|Constraint Name |Description
|users_pkey |Primary key constraint on id
|uk_users_email |Unique constraint on email
|===

=== Design Considerations

==== Security Features
* Passwords are stored using secure hashing algorithms
* Soft deletion support for audit trails
* Versioning for concurrent access control

==== User Types
* System-level users (is_ward_level_user = false)
* Ward-level users (is_ward_level_user = true)
* Approval workflow through is_approved flag

==== Audit Trail
* Complete tracking of creation and modifications
* Soft deletion with timestamp and deletion author
* Version control for optimistic locking
